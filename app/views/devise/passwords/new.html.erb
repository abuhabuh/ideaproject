<% content_for :head do %>
<script>

  $(document).ready(function(){
      $("#user_email").focus();
      $('a[rel*=facebox]').facebox()
    });

  $(document).bind('reveal.facebox', function() {
    /* BIND submit action on new password creation form to this function
    - "new_password" id is auto generated by new deal _form partial*/
  $("#user_new").submit( function(){
  // we are in the context of the form that is displayed by facebox because the button
  //   that was clicked belongs to the form

  // submit AJAX request and set return type to be jQuery which will be executed
    $.post($(this).attr('action'), $(this).serialize(), function(returned_html) {
        $.facebox(returned_html)
    }, "html")
    .error(
      function(status, textStatus) { 
        $("#error").show();
      }); 
      return false;
    });
  });
</script>
<% end %>


<h2>Forgot your password?</h2>
<div id="error" class="hidden-div" rel="facebox"><font color=red>Invalid Email address</font></div>
<%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => { :method => :post }) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.submit "Send me reset password instructions" %></div>
<% end %>

<%= render :partial => "devise/shared/links" %>
