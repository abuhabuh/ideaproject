<% content_for :head do %>
<script>
  $(document).bind('reveal.facebox', function() {
    /* BIND submit action on new password creation form to this function
    - "new_password" id is auto generated by new deal _form partial*/
  $(".new_password").submit( function(){
  // we are in the context of the form that is displayed by facebox because the button
  //   that was clicked belongs to the form

  // submit AJAX request and set return type to be jQuery which will be executed
    $.post($(this).attr('action'), $(this).serialize(), function() {
        $.facebox(returned_html)
    }, "html");  
      return false;
    });
  });
</script>
<% end %>

<h2>Resend confirmation instructions</h2>

<div id='new_password'>
<%= form_for(resource, :as => resource_name, :url => confirmation_path(resource_name), :html => { :method => :post }) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.submit "Resend confirmation instructions" %></div>
<% end %>
</div>
<%= render :partial => "devise/shared/links" %>
